{"ast":null,"code":"import _assertThisInitialized from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/sagnikg/react/JazzApp/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport { ReactComponent } from \"@svgr/webpack?-svgo,+ref!./logo.svg\";\nimport './App.css';\nimport './welcome_screen.css';\nimport ReactDOM from 'react-dom';\nimport socketIOClient from \"socket.io-client\";\nvar ENDPOINT = \"http://127.0.0.1:4001\";\nvar socket = socketIOClient(ENDPOINT);\nsocket.on('connect', function () {\n  var userUnikID = \"user_\" + socket.id;\n  console.log(userUnikID); // true\n});\n\nfunction App() {\n  var tile = 40;\n\n  var Grid = /*#__PURE__*/function (_React$Component) {\n    _inherits(Grid, _React$Component);\n\n    function Grid(props) {\n      _classCallCheck(this, Grid);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(Grid).call(this, props));\n    }\n\n    _createClass(Grid, [{\n      key: \"render\",\n      value: function render() {\n        var haha;\n\n        for (var i = 0; i <= 135; i++) {\n          for (var j = 0; j <= 65; j++) {\n            haha.push( /*#__PURE__*/React.createElement(\"div\", {\n              class: \"grid\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 33,\n                columnNumber: 21\n              }\n            }, (i, j)));\n          }\n        }\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 14\n          }\n        }, haha);\n      }\n    }]);\n\n    return Grid;\n  }(React.Component);\n\n  var Messages = /*#__PURE__*/function (_React$Component2) {\n    _inherits(Messages, _React$Component2);\n\n    function Messages(props) {\n      var _this;\n\n      _classCallCheck(this, Messages);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Messages).call(this, props));\n      _this.state = {\n        messages: _this.props.messages\n      };\n      return _this;\n    }\n\n    _createClass(Messages, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        document.addEventListener('gandu', function (event) {\n          _this2.setState({\n            messages: event.detail.barta\n          });\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n\n        var msgz = this.state.messages.map(function (msg) {\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 52\n            }\n          }, msg);\n        });\n        return /*#__PURE__*/React.createElement(\"ul\", {\n          id: \"messages\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 11\n          }\n        }, msgz);\n      }\n    }]);\n\n    return Messages;\n  }(React.Component);\n\n  var Chat = /*#__PURE__*/function (_React$Component3) {\n    _inherits(Chat, _React$Component3);\n\n    function Chat(props) {\n      var _this4;\n\n      _classCallCheck(this, Chat);\n\n      _this4 = _possibleConstructorReturn(this, _getPrototypeOf(Chat).call(this, props));\n      _this4.handleChange = _this4.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this4)));\n      _this4.keyPress = _this4.keyPress.bind(_assertThisInitialized(_assertThisInitialized(_this4)));\n      _this4.state = {\n        name: _this4.props.name,\n        messages: [],\n        currentmsg: ''\n      }; //console.log(\"name is: \"+this.props.name);\n\n      return _this4;\n    }\n\n    _createClass(Chat, [{\n      key: \"keyPress\",\n      value: function keyPress(e) {\n        if (e.keyCode == 13) {\n          socket.emit('sendmessage', this.state.name, this.state.currentmsg);\n          e.target.value = '';\n        }\n      }\n    }, {\n      key: \"handleChange\",\n      value: function handleChange(e) {\n        this.state.currentmsg = e.target.value;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          id: \"chat\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Messages, {\n          messages: this.state.messages,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          id: \"typehold\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          onChange: this.handleChange,\n          onKeyDown: this.keyPress,\n          placeholder: \"enter a message...\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }\n        })));\n      }\n    }]);\n\n    return Chat;\n  }(React.Component);\n\n  var Character = /*#__PURE__*/function (_React$Component4) {\n    _inherits(Character, _React$Component4);\n\n    function Character(props) {\n      var _this5;\n\n      _classCallCheck(this, Character);\n\n      _this5 = _possibleConstructorReturn(this, _getPrototypeOf(Character).call(this, props));\n      _this5.state = {\n        name: _this5.props.name,\n        x: _this5.props.x,\n        y: _this5.props.y,\n        id: _this5.props.id,\n        fLeft: _this5.props.fLeft,\n        avatar: _this5.props.avatar\n      };\n      _this5.state.charStyle = {\n        left: _this5.props.x * tile + 'px',\n        top: _this5.props.y * tile + 'px',\n        zIndex: _this5.props.y,\n        transform: 'scaleX(' + _this5.props.fLeft + ')'\n      };\n      return _this5;\n    }\n\n    _createClass(Character, [{\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        // if (this.props.x !== prevProps.x || this.props.y !== prevProps.y) {\n        if (this.props !== prevProps) {\n          this.setState({\n            name: this.props.name,\n            x: this.props.x,\n            y: this.props.y,\n            fLeft: this.props.fLeft,\n            avatar: this.props.avatar,\n            charStyle: {\n              left: this.props.x * tile + 'px',\n              top: this.props.y * tile + 'px',\n              zIndex: this.props.y\n            }\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var clasist = \"character\";\n        if (this.state.fLeft == -1) clasist += \" fleft\";\n\n        switch (this.state.avatar) {\n          case 0:\n            clasist += \" doomer\";\n            break;\n\n          case 1:\n            clasist += \" bhakt\";\n            break;\n\n          case 2:\n            clasist += \" moist\";\n            break;\n\n          case 3:\n            clasist += \" ladis\";\n            break;\n\n          case 4:\n            clasist += \" nerd\";\n            break;\n\n          case 5:\n            clasist += \" lib\";\n            break;\n        }\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: clasist,\n          style: this.state.charStyle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"b\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 16\n          }\n        }, this.state.name)));\n      }\n    }]);\n\n    return Character;\n  }(React.Component);\n\n  var GameBox = /*#__PURE__*/function (_React$Component5) {\n    _inherits(GameBox, _React$Component5);\n\n    function GameBox(props) {\n      var _this6;\n\n      _classCallCheck(this, GameBox);\n\n      _this6 = _possibleConstructorReturn(this, _getPrototypeOf(GameBox).call(this, props));\n      _this6.keyPress = _this6.keyPress.bind(_assertThisInitialized(_assertThisInitialized(_this6)));\n      _this6.state = {\n        players: _this6.props.players,\n        worldStyle: {\n          left: '0px',\n          top: '0px'\n        },\n        worldX: 0,\n        worldY: 0\n      };\n      _this6.moveCam = _this6.moveCam.bind(_assertThisInitialized(_assertThisInitialized(_this6)));\n      return _this6;\n    }\n\n    _createClass(GameBox, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this7 = this;\n\n        document.addEventListener('updatePos', function (event) {\n          _this7.setState({\n            players: event.detail.positions\n          }); // console.log(event.detail.positions);\n\n        });\n      }\n    }, {\n      key: \"keyPress\",\n      value: function keyPress(e) {\n        var playersChanged = this.state.players;\n        var i;\n\n        for (i = 0; i < playersChanged.length; i++) {\n          if (playersChanged[i].name == userPlayer.name) {\n            break;\n          }\n        }\n\n        var ox = playersChanged[i].x;\n        var oy = playersChanged[i].y;\n\n        if (e.keyCode == 39) {\n          if (playersChanged[i].fLeft == 1) {\n            playersChanged[i].x = playersChanged[i].x + 1;\n          }\n\n          playersChanged[i].fLeft = 1;\n        }\n\n        if (e.keyCode == 37) {\n          if (playersChanged[i].fLeft == -1) {\n            playersChanged[i].x = playersChanged[i].x - 1;\n          }\n\n          playersChanged[i].fLeft = -1;\n        }\n\n        if (e.keyCode == 38) playersChanged[i].y = playersChanged[i].y - 1;\n        if (e.keyCode == 40) playersChanged[i].y = playersChanged[i].y + 1;\n        var nx = playersChanged[i].x;\n        var ny = playersChanged[i].y;\n\n        if (nx < 0 || ny < 0 || nx > 131 || ny > 58) {\n          playersChanged[i].x = ox;\n          playersChanged[i].y = oy;\n        } else {\n          this.moveCam(nx, ny);\n          socket.emit(\"changePlayerPositions\", playersChanged);\n        }\n      }\n    }, {\n      key: \"moveCam\",\n      value: function moveCam(x, y) {\n        x = x * 40 + this.state.worldX;\n        y = y * 40 + this.state.worldY;\n        if (x > window.screen.availWidth * 0.6) this.state.worldX = this.state.worldX - 40;\n        if (y + 240 > window.innerHeight) this.state.worldY = this.state.worldY - 40;\n        if (x < 0) this.state.worldX = this.state.worldX + 40;\n        if (y < 0) this.state.worldY = this.state.worldY + 40;\n        this.setState({\n          worldStyle: {\n            top: this.state.worldY + 'px',\n            left: this.state.worldX + 'px'\n          }\n        });\n        console.log(x + \" \" + y);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this8 = this;\n\n        var karz = this.state.players.map(function (player) {\n          return /*#__PURE__*/React.createElement(Character, {\n            id: player.id,\n            avatar: player.avatar,\n            name: player.name,\n            x: player.x,\n            y: player.y,\n            fLeft: player.fLeft,\n            __self: _this8,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 54\n            }\n          });\n        });\n        return /*#__PURE__*/React.createElement(\"div\", {\n          id: \"gameBox\",\n          onKeyUp: this.keyPress,\n          tabIndex: \"0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          id: \"gameWorld\",\n          style: this.state.worldStyle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }\n        }), karz));\n      }\n    }]);\n\n    return GameBox;\n  }(React.Component);\n\n  socket.on(\"receivemessage\", function (messages) {\n    //console.log(\"peyechi ekta message\");\n    document.dispatchEvent(new CustomEvent(\"gandu\", {\n      detail: {\n        barta: messages\n      }\n    }));\n  });\n  socket.on(\"changedPlayerPositions\", function (newPositions) {\n    //console.log(newPositions);\n    document.dispatchEvent(new CustomEvent(\"updatePos\", {\n      detail: {\n        positions: newPositions\n      }\n    }));\n  });\n  /*\n   console.log(userPlayer.name);\n  socket.emit(\"addplayer\",userPlayer);\n  \n    return (\n  <div>\n    <GameBox players={[]}/>\n    <Chat name={userPlayer.name}/>\n  </div>\n  \n  );\n  */\n\n  var userPlayer = {\n    name: \"foo\",\n    x: 0,\n    y: 0\n  };\n\n  var PlayerSelection = /*#__PURE__*/function (_React$Component6) {\n    _inherits(PlayerSelection, _React$Component6);\n\n    function PlayerSelection(props) {\n      var _this9;\n\n      _classCallCheck(this, PlayerSelection);\n\n      _this9 = _possibleConstructorReturn(this, _getPrototypeOf(PlayerSelection).call(this, props));\n      _this9.state = {\n        name: \"TERE_NAAM\",\n        availability: false,\n        type: 0\n      };\n      _this9.handleChange = _this9.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this9)));\n      _this9.checkVal = _this9.checkVal.bind(_assertThisInitialized(_assertThisInitialized(_this9)));\n      _this9.playerFixed = _this9.playerFixed.bind(_assertThisInitialized(_assertThisInitialized(_this9)));\n      _this9.setAvatar = _this9.setAvatar.bind(_assertThisInitialized(_assertThisInitialized(_this9)));\n      return _this9;\n    }\n\n    _createClass(PlayerSelection, [{\n      key: \"handleChange\",\n      value: function handleChange(e) {\n        this.setState({\n          name: e.target.value == '' ? 'TERE_NAAM' : e.target.value\n        });\n        socket.emit(\"checkplayer\", e.target.value);\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this10 = this;\n\n        socket.on(\"playerReadyToAdd\", function (x) {\n          if (x < 0) _this10.setState({\n            availability: true\n          });else _this10.setState({\n            availability: false\n          });\n        });\n      }\n    }, {\n      key: \"checkVal\",\n      value: function checkVal(e) {\n        var x = e.keyCode;\n        if ((x < 65 || x > 90) && (x < 97 || x > 122) && x != 8 && (x < 37 || x > 40) && x != 46) e.preventDefault();\n      }\n    }, {\n      key: \"playerFixed\",\n      value: function playerFixed() {\n        if (this.state.availability) {\n          userPlayer = {\n            name: this.state.name,\n            x: 0,\n            y: 0,\n            fLeft: 1,\n            avatar: this.state.type\n          };\n          socket.emit(\"addplayer\", userPlayer);\n          ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(GameBox, {\n            players: [],\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(Chat, {\n            name: userPlayer.name,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 13\n            }\n          })), document.getElementById('root'));\n        }\n      }\n    }, {\n      key: \"setAvatar\",\n      value: function setAvatar() {\n        this.setState({\n          type: (this.state.type + 1) % 6\n        }); //console.log(this.state.type);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          id: \"choosePlayer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 7\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          id: \"cha\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Character, {\n          x: 0,\n          avatar: this.state.type,\n          fLeft: 1,\n          name: this.state.name,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 11\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          id: \"details\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          id: \"namoagain\",\n          className: this.state.availability ? '' : 'fuckd',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }\n        }, \"enter your name:\", /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          maxlength: \"10\",\n          onChange: this.handleChange,\n          onKeyDown: this.checkVal,\n          placeholder: \"tere naam...\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 15\n          }\n        })), /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          class: \"eightbit-btn eightbit-btn--proceed\",\n          onClick: this.setAvatar,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }\n        }, '<< CHANGE AVATAR >>'), /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          class: \"eightbit-btn\",\n          onClick: this.playerFixed,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }\n        }, \"JOIN\"))));\n      }\n    }]);\n\n    return PlayerSelection;\n  }(React.Component);\n\n  return /*#__PURE__*/React.createElement(PlayerSelection, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 10\n    }\n  });\n}\n\nexport default App;","map":{"version":3,"sources":["/home/sagnikg/react/JazzApp/src/App.js"],"names":["React","ReactDOM","socketIOClient","ENDPOINT","socket","on","userUnikID","id","console","log","App","tile","Grid","props","haha","i","j","push","Component","Messages","state","messages","document","addEventListener","event","setState","detail","barta","msgz","map","msg","Chat","handleChange","bind","keyPress","name","currentmsg","e","keyCode","emit","target","value","Character","x","y","fLeft","avatar","charStyle","left","top","zIndex","transform","prevProps","clasist","GameBox","players","worldStyle","worldX","worldY","moveCam","positions","playersChanged","length","userPlayer","ox","oy","nx","ny","window","screen","availWidth","innerHeight","karz","player","dispatchEvent","CustomEvent","newPositions","PlayerSelection","availability","type","checkVal","playerFixed","setAvatar","preventDefault","render","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo, { ReactComponent } from './logo.svg';\nimport './App.css';\nimport './welcome_screen.css';\nimport ReactDOM from 'react-dom';\nimport socketIOClient from \"socket.io-client\";\nconst ENDPOINT = \"http://127.0.0.1:4001\";\nconst socket = socketIOClient(ENDPOINT);\n\n\n\nsocket.on('connect', () => {\n  const userUnikID = \"user_\" + socket.id;\n  console.log(userUnikID); // true\n});\n\n\n\nfunction App() {\n  var tile = 40; \n\n\n  class Grid extends React.Component{\n    constructor(props){\n      super(props);\n    }\n\n    render()\n    {\n      var haha;\n      for(var i=0;i<=135;i++)\n        for(var j=0;j<=65;j++)\n          haha.push(<div class=\"grid\">{i,j}</div>);\n      return <div>{haha}</div>;\n    }\n  }\n  class Messages extends React.Component{\n    constructor(props){\n      super(props);\n      this.state = {\n        messages : this.props.messages\n      }\n    }\n\n    componentDidMount(){\n      document.addEventListener('gandu',  (event) => {\n        this.setState({\n          messages : event.detail.barta\n        });\n      });\n    }\n\n    render(){\n      var msgz = this.state.messages.map( (msg) => <li>{msg}</li>);\n      return (\n          <ul id=\"messages\">\n            {msgz}\n          </ul>\n      );\n    }\n  }\n\n  class Chat extends React.Component {\n    constructor(props){\n      super(props);\n      this.handleChange = this.handleChange.bind(this);\n      this.keyPress = this.keyPress.bind(this);\n      this.state = {\n        name : this.props.name,\n        messages : [],\n        currentmsg : ''\n      }\n      //console.log(\"name is: \"+this.props.name);\n    }\n\n    keyPress(e){\n      if(e.keyCode == 13)\n       {\n        socket.emit('sendmessage',this.state.name,this.state.currentmsg);\n        e.target.value = '';\n       }\n    }\n\n    handleChange(e) {\n      this.state.currentmsg = e.target.value;\n    }\n\n    render(){\n      return (\n        <div id=\"chat\">\n            <Messages messages={this.state.messages}/>\n          <div id=\"typehold\">\n            <input type=\"text\" onChange={this.handleChange} onKeyDown={this.keyPress} placeholder=\"enter a message...\"></input>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  class Character extends React.Component {\n    constructor(props){\n      super(props);\n      this.state = {\n        name: this.props.name,\n        x : this.props.x,\n        y : this.props.y,\n        id : this.props.id,\n        fLeft : this.props.fLeft,\n        avatar : this.props.avatar\n      };\n      this.state.charStyle = {\n        left: this.props.x*tile + 'px',\n        top: this.props.y*tile + 'px',\n        zIndex: this.props.y,\n        transform : 'scaleX('+ this.props.fLeft +')'\n      }\n    }\n\n    componentDidUpdate(prevProps) {\n     // if (this.props.x !== prevProps.x || this.props.y !== prevProps.y) {\n       \n      if (this.props !== prevProps) {\n        this.setState({ \n          name: this.props.name,\n          x : this.props.x,\n          y : this.props.y,\n          fLeft : this.props.fLeft,\n          avatar : this.props.avatar,\n          charStyle : {\n            left: this.props.x*tile + 'px',\n            top: this.props.y*tile + 'px',\n            zIndex: this.props.y\n          }\n        });\n      }\n    }\n    \n    render(){\n      var clasist = \"character\";\n      if(this.state.fLeft == -1)\n        clasist += \" fleft\";\n      \n      switch(this.state.avatar)\n      {\n        case 0: clasist += \" doomer\"; break;\n        case 1: clasist += \" bhakt\"; break;\n        case 2: clasist += \" moist\"; break;\n        case 3: clasist += \" ladis\"; break;\n        case 4: clasist += \" nerd\"; break;\n        case 5: clasist += \" lib\"; break; \n      }\n      \n\n      return(\n          <div className={clasist} style={this.state.charStyle} >\n            <p><b>{this.state.name}</b></p>\n          </div>\n      );\n    }\n  }\n  \n  class GameBox extends React.Component {\n    constructor(props){\n      super(props);\n      this.keyPress = this.keyPress.bind(this);\n      this.state = {\n        players : this.props.players,\n        worldStyle : {\n          left: '0px',\n          top: '0px'\n        },\n        worldX : 0,\n        worldY : 0\n      };\n      this.moveCam = this.moveCam.bind(this);\n    }\n\n    componentDidMount(){\n      document.addEventListener('updatePos',  (event) => {\n        this.setState({\n          players : event.detail.positions\n        });\n        // console.log(event.detail.positions);\n      });\n    }\n\n    keyPress(e){\n      var playersChanged = this.state.players;\n      var i;\n      for(i=0;i<playersChanged.length;i++)\n      {\n        if(playersChanged[i].name == userPlayer.name)\n        { break;}\n      }\n\n      var ox = playersChanged[i].x;\n      var oy = playersChanged[i].y;\n\n      if(e.keyCode == 39)\n      { \n        if(playersChanged[i].fLeft == 1)\n          { playersChanged[i].x = playersChanged[i].x+1;}\n        playersChanged[i].fLeft = 1;\n      }\n\n      if(e.keyCode == 37)\n      {\n        if(playersChanged[i].fLeft == -1)\n          { playersChanged[i].x = playersChanged[i].x-1;}\n        playersChanged[i].fLeft = -1;\n      }\n\n      if(e.keyCode == 38)\n      playersChanged[i].y =playersChanged[i].y-1;\n\n      if(e.keyCode == 40)\n      playersChanged[i].y =playersChanged[i].y+1;\n\n      var nx = playersChanged[i].x;\n      var ny = playersChanged[i].y;\n      if(nx < 0 || ny < 0 || nx > 131 || ny > 58)\n      {\n        playersChanged[i].x = ox;\n        playersChanged[i].y = oy;\n      }\n      else \n      {\n        this.moveCam(nx,ny);\n        socket.emit(\"changePlayerPositions\",playersChanged);\n      }\n    }\n\n    moveCam(x,y){\n      x = x * 40 + this.state.worldX;\n      y = y * 40 + this.state.worldY;\n      if(x > window.screen.availWidth * 0.6)\n        this.state.worldX = this.state.worldX - 40;\n      \n      if((y + 240) > window.innerHeight)\n        this.state.worldY = this.state.worldY - 40;\n\n      if(x < 0)\n        this.state.worldX = this.state.worldX + 40;\n\n      if(y < 0)\n        this.state.worldY = this.state.worldY + 40;\n      \n      this.setState({\n        worldStyle : {\n          top : this.state.worldY +'px',\n          left : this.state.worldX +'px'\n        }\n      });\n      console.log(x + \" \" + y);\n    }\n\n    render(){\n      var karz = this.state.players.map( (player) => <Character id={player.id} avatar={player.avatar} name={player.name} x={player.x} y={player.y} fLeft={player.fLeft} />);\n      return(\n        <div id=\"gameBox\" onKeyUp={this.keyPress} tabIndex=\"0\">\n          <div id=\"gameWorld\" style={this.state.worldStyle}>\n            <Grid />\n          {karz}\n          </div>\n        </div>\n      );\n    }\n  } \n\n\n  socket.on(\"receivemessage\", (messages) => {\n    //console.log(\"peyechi ekta message\");\n    document.dispatchEvent(new CustomEvent(\"gandu\", {\n      detail: { barta : messages }\n    }));\n  });\n\n  socket.on(\"changedPlayerPositions\", (newPositions) => {\n    //console.log(newPositions);\n    document.dispatchEvent(new CustomEvent(\"updatePos\", {\n      detail: { positions : newPositions }\n    }));\n  });\n  /*\n\n  console.log(userPlayer.name);\n  socket.emit(\"addplayer\",userPlayer);\n\n \n\n\n  return (\n  <div>\n    <GameBox players={[]}/>\n    <Chat name={userPlayer.name}/>\n  </div>\n  \n  );\n*/\n  var userPlayer = {\n    name : \"foo\",\n    x : 0,\n    y : 0\n  };\n\n  class PlayerSelection extends React.Component {\n    constructor(props){\n      super(props);\n      this.state = {\n        name : \"TERE_NAAM\",\n        availability : false,\n        type : 0\n      }\n      this.handleChange = this.handleChange.bind(this);\n      this.checkVal = this.checkVal.bind(this);\n      this.playerFixed = this.playerFixed.bind(this);\n      this.setAvatar = this.setAvatar.bind(this);\n    }\n\n    handleChange(e) {\n      this.setState({\n        name : ((e.target.value == '') ? 'TERE_NAAM' : e.target.value)\n      });\n      socket.emit(\"checkplayer\", e.target.value);\n    }\n\n    componentDidMount(){\n      socket.on(\"playerReadyToAdd\", (x) => {\n        if(x<0)\n          this.setState({\n            availability : true\n          });\n        else\n          this.setState({\n            availability : false\n          });\n      });\n    }\n\n    checkVal(e){\n      var x = e.keyCode;\n      if((x<65 || x>90) && (x<97 || x>122) && x!=8 && (x<37 || x>40) && x!=46)\n       e.preventDefault();\n    }\n\n    playerFixed(){\n      if(this.state.availability)\n        {\n          userPlayer = {\n            name : this.state.name,\n            x : 0,\n            y : 0,\n            fLeft : 1,\n            avatar : this.state.type\n          };\n          socket.emit(\"addplayer\",userPlayer);\n\n          \n          ReactDOM.render(\n          <div>\n            <GameBox players={[]}/>\n            <Chat name={userPlayer.name}/>\n          </div>,\n            document.getElementById('root')\n          );\n        }\n    }\n\n    setAvatar(){\n      this.setState({\n        type : (this.state.type + 1)%6\n      });\n      //console.log(this.state.type);\n    }\n\n    render()\n    {\n      return (\n      <div id=\"choosePlayer\">\n        <div id=\"cha\">\n          <Character x={0} avatar={this.state.type} fLeft={1} name={this.state.name}/>\n        </div>\n        <div id='details'>\n          <div>\n          \n            <div id='namoagain' className={(this.state.availability ? '' : 'fuckd')}>\n              enter your name:\n              <input type=\"text\" maxlength=\"10\" onChange={this.handleChange} onKeyDown={this.checkVal} placeholder=\"tere naam...\"></input>\n            </div>\n\n            <hr />\n\n            <button class='eightbit-btn eightbit-btn--proceed' onClick={this.setAvatar} >{'<< CHANGE AVATAR >>'}</button>\n            \n            <hr />\n            \n            <button class='eightbit-btn' onClick={this.playerFixed}>JOIN</button>\n          </div>\n        </div>\n      </div>);\n    }\n  }\n\n  return <PlayerSelection />;\n}\n\nexport default App;\n\n\n"]},"metadata":{},"sourceType":"module"}