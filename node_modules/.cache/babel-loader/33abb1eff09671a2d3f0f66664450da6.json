{"ast":null,"code":"import _assertThisInitialized from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/sagnikg/react/JazzApp/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport { ReactComponent } from \"@svgr/webpack?-svgo,+ref!./logo.svg\";\nimport './App.css';\nimport ReactDOM from 'react-dom';\nimport socketIOClient from \"socket.io-client\";\nvar ENDPOINT = \"http://127.0.0.1:4001\";\nvar socket = socketIOClient(ENDPOINT);\nsocket.on('connect', function () {\n  var userUnikID = \"user_\" + socket.id;\n  console.log(userUnikID); // true\n});\n\nfunction App() {\n  var tile = 64;\n  var userPlayer = {\n    name: \"foo\",\n    x: 0,\n    y: 0\n  };\n\n  var Messages = /*#__PURE__*/function (_React$Component) {\n    _inherits(Messages, _React$Component);\n\n    function Messages(props) {\n      var _this;\n\n      _classCallCheck(this, Messages);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Messages).call(this, props));\n      _this.state = {\n        messages: _this.props.messages\n      };\n      return _this;\n    }\n\n    _createClass(Messages, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        document.addEventListener('gandu', function (event) {\n          _this2.setState({\n            messages: event.detail.barta\n          });\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n\n        var msgz = this.state.messages.map(function (msg) {\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 52\n            }\n          }, msg);\n        });\n        return /*#__PURE__*/React.createElement(\"ul\", {\n          id: \"messages\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 11\n          }\n        }, msgz);\n      }\n    }]);\n\n    return Messages;\n  }(React.Component);\n\n  var Chat = /*#__PURE__*/function (_React$Component2) {\n    _inherits(Chat, _React$Component2);\n\n    function Chat(props) {\n      var _this4;\n\n      _classCallCheck(this, Chat);\n\n      _this4 = _possibleConstructorReturn(this, _getPrototypeOf(Chat).call(this, props));\n      _this4.handleChange = _this4.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this4)));\n      _this4.keyPress = _this4.keyPress.bind(_assertThisInitialized(_assertThisInitialized(_this4)));\n      _this4.state = {\n        name: _this4.props.name,\n        messages: [],\n        currentmsg: ''\n      };\n      console.log(\"name is: \" + _this4.props.name);\n      return _this4;\n    }\n\n    _createClass(Chat, [{\n      key: \"keyPress\",\n      value: function keyPress(e) {\n        if (e.keyCode == 13) {\n          socket.emit('sendmessage', this.state.name, this.state.currentmsg);\n          e.target.value = '';\n        }\n      }\n    }, {\n      key: \"handleChange\",\n      value: function handleChange(e) {\n        this.state.currentmsg = e.target.value;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          id: \"chat\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Messages, {\n          messages: this.state.messages,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          id: \"typehold\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          onChange: this.handleChange,\n          onKeyDown: this.keyPress,\n          placeholder: \"enter a message...\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }\n        })));\n      }\n    }]);\n\n    return Chat;\n  }(React.Component);\n\n  var Character = /*#__PURE__*/function (_React$Component3) {\n    _inherits(Character, _React$Component3);\n\n    function Character(props) {\n      var _this5;\n\n      _classCallCheck(this, Character);\n\n      _this5 = _possibleConstructorReturn(this, _getPrototypeOf(Character).call(this, props));\n      _this5.state = {\n        name: _this5.props.name,\n        x: _this5.props.x,\n        y: _this5.props.y,\n        id: _this5.props.id\n      };\n      _this5.state.charStyle = {\n        left: _this5.props.x * tile + 'px',\n        top: _this5.props.y * tile + 'px',\n        zIndex: _this5.props.y\n      };\n      return _this5;\n    }\n\n    _createClass(Character, [{\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        // if (this.props.x !== prevProps.x || this.props.y !== prevProps.y) {\n        if (this.props !== prevProps) {\n          this.setState({\n            name: this.props.name,\n            x: this.props.x,\n            y: this.props.y,\n            charStyle: {\n              left: this.props.x * tile + 'px',\n              top: this.props.y * tile + 'px',\n              zIndex: this.props.y\n            }\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        if (this.state.id == \"userChar\") return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"character\",\n          style: this.state.charStyle,\n          id: \"user\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }\n        }, this.state.name.toUpperCase()));\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"character\",\n          style: this.state.charStyle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }\n        }, this.state.name.toUpperCase()));\n      }\n    }]);\n\n    return Character;\n  }(React.Component);\n\n  var GameBox = /*#__PURE__*/function (_React$Component4) {\n    _inherits(GameBox, _React$Component4);\n\n    function GameBox(props) {\n      var _this6;\n\n      _classCallCheck(this, GameBox);\n\n      _this6 = _possibleConstructorReturn(this, _getPrototypeOf(GameBox).call(this, props));\n      _this6.keyPress = _this6.keyPress.bind(_assertThisInitialized(_assertThisInitialized(_this6)));\n      _this6.state = {\n        players: _this6.props.players\n      };\n      return _this6;\n    }\n\n    _createClass(GameBox, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this7 = this;\n\n        document.addEventListener('updatePos', function (event) {\n          _this7.setState({\n            players: event.detail.positions\n          }); // console.log(event.detail.positions);\n\n        });\n      }\n    }, {\n      key: \"keyPress\",\n      value: function keyPress(e) {\n        var playersChanged = this.state.players;\n\n        for (var i = 0; i < playersChanged.length; i++) {\n          if (playersChanged[i].name == userPlayer.name) {\n            if (e.keyCode == 39) playersChanged[i].x = playersChanged[i].x + 1;\n            if (e.keyCode == 37) playersChanged[i].x = playersChanged[i].x - 1;\n            if (e.keyCode == 38) playersChanged[i].y = playersChanged[i].y - 1;\n            if (e.keyCode == 40) playersChanged[i].y = playersChanged[i].y + 1;\n          }\n        }\n\n        socket.emit(\"changePlayerPositions\", playersChanged);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this8 = this;\n\n        var karz = this.state.players.map(function (player) {\n          return /*#__PURE__*/React.createElement(Character, {\n            id: player.id,\n            name: player.name,\n            x: player.x,\n            y: player.y,\n            __self: _this8,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 54\n            }\n          });\n        });\n        return /*#__PURE__*/React.createElement(\"div\", {\n          id: \"gameBox\",\n          onKeyDown: this.keyPress,\n          tabIndex: \"0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 9\n          }\n        }, karz);\n      }\n    }]);\n\n    return GameBox;\n  }(React.Component);\n\n  socket.on(\"receivemessage\", function (messages) {\n    //console.log(\"peyechi ekta message\");\n    document.dispatchEvent(new CustomEvent(\"gandu\", {\n      detail: {\n        barta: messages\n      }\n    }));\n  });\n  /*\n   console.log(userPlayer.name);\n  socket.emit(\"addplayer\",userPlayer);\n   socket.on(\"changedPlayerPositions\", (newPositions) => {\n    console.log(newPositions);\n    document.dispatchEvent(new CustomEvent(\"updatePos\", {\n      detail: { positions : newPositions }\n    }));\n  });\n    return (\n  <div>\n    <GameBox players={[]}/>\n    <Chat name={userPlayer.name}/>\n  </div>\n  \n  );\n  */\n\n  var PlayerSelection = /*#__PURE__*/function (_React$Component5) {\n    _inherits(PlayerSelection, _React$Component5);\n\n    function PlayerSelection(props) {\n      var _this9;\n\n      _classCallCheck(this, PlayerSelection);\n\n      _this9 = _possibleConstructorReturn(this, _getPrototypeOf(PlayerSelection).call(this, props));\n      _this9.state = {\n        name: \"your name\"\n      };\n      _this9.handleChange = _this9.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this9)));\n      return _this9;\n    }\n\n    _createClass(PlayerSelection, [{\n      key: \"handleChange\",\n      value: function handleChange(e) {\n        this.setState({\n          name: e.target.value\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          id: \"choosePlayer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 7\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Character, {\n          x: 0,\n          name: this.state.name,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 11\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          onChange: this.handleChange,\n          placeholder: \"enter a message...\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 11\n          }\n        })));\n      }\n    }]);\n\n    return PlayerSelection;\n  }(React.Component);\n\n  return /*#__PURE__*/React.createElement(PlayerSelection, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 10\n    }\n  });\n}\n\nexport default App;","map":{"version":3,"sources":["/home/sagnikg/react/JazzApp/src/App.js"],"names":["React","ReactDOM","socketIOClient","ENDPOINT","socket","on","userUnikID","id","console","log","App","tile","userPlayer","name","x","y","Messages","props","state","messages","document","addEventListener","event","setState","detail","barta","msgz","map","msg","Component","Chat","handleChange","bind","keyPress","currentmsg","e","keyCode","emit","target","value","Character","charStyle","left","top","zIndex","prevProps","toUpperCase","GameBox","players","positions","playersChanged","i","length","karz","player","dispatchEvent","CustomEvent","PlayerSelection"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo, { ReactComponent } from './logo.svg';\nimport './App.css';\nimport ReactDOM from 'react-dom';\n\nimport socketIOClient from \"socket.io-client\";\nconst ENDPOINT = \"http://127.0.0.1:4001\";\nconst socket = socketIOClient(ENDPOINT);\n\n\n\nsocket.on('connect', () => {\n  const userUnikID = \"user_\" + socket.id;\n  console.log(userUnikID); // true\n});\n\n\n\nfunction App() {\n  var tile = 64; \n\n  var userPlayer = {\n    name : \"foo\",\n    x : 0,\n    y : 0\n  };\n  class Messages extends React.Component{\n    constructor(props){\n      super(props);\n      this.state = {\n        messages : this.props.messages\n      }\n    }\n\n    componentDidMount(){\n      document.addEventListener('gandu',  (event) => {\n        this.setState({\n          messages : event.detail.barta\n        });\n      });\n    }\n\n    render(){\n      var msgz = this.state.messages.map( (msg) => <li>{msg}</li>);\n      return (\n          <ul id=\"messages\">\n            {msgz}\n          </ul>\n      );\n    }\n  }\n\n  class Chat extends React.Component {\n    constructor(props){\n      super(props);\n      this.handleChange = this.handleChange.bind(this);\n      this.keyPress = this.keyPress.bind(this);\n      this.state = {\n        name : this.props.name,\n        messages : [],\n        currentmsg : ''\n      }\n      console.log(\"name is: \"+this.props.name);\n    }\n\n    keyPress(e){\n      if(e.keyCode == 13)\n       {\n        socket.emit('sendmessage',this.state.name,this.state.currentmsg);\n        e.target.value = '';\n       }\n    }\n\n    handleChange(e) {\n      this.state.currentmsg = e.target.value;\n    }\n\n    render(){\n      return (\n        <div id=\"chat\">\n            <Messages messages={this.state.messages}/>\n          <div id=\"typehold\">\n            <input type=\"text\" onChange={this.handleChange} onKeyDown={this.keyPress} placeholder=\"enter a message...\"></input>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  class Character extends React.Component {\n    constructor(props){\n      super(props);\n      this.state = {\n        name: this.props.name,\n        x : this.props.x,\n        y : this.props.y,\n        id : this.props.id\n        \n      };\n      this.state.charStyle = {\n        left: this.props.x*tile + 'px',\n        top: this.props.y*tile + 'px',\n        zIndex: this.props.y\n      }\n    }\n\n    componentDidUpdate(prevProps) {\n     // if (this.props.x !== prevProps.x || this.props.y !== prevProps.y) {\n       \n      if (this.props !== prevProps) {\n        this.setState({ \n          name: this.props.name,\n          x : this.props.x,\n          y : this.props.y,\n          charStyle : {\n            left: this.props.x*tile + 'px',\n            top: this.props.y*tile + 'px',\n            zIndex: this.props.y\n          }\n        });\n      }\n    }\n    \n    render(){\n      \n      if(this.state.id == \"userChar\")\n        return(\n          <div className=\"character\" style={this.state.charStyle} id=\"user\">\n            <p>{this.state.name.toUpperCase()}</p>\n          </div>\n        );\n      return(\n          <div className=\"character\" style={this.state.charStyle} >\n            <p>{this.state.name.toUpperCase()}</p>\n          </div>\n      );\n    }\n  }\n  \n  class GameBox extends React.Component {\n    constructor(props){\n      super(props);\n      this.keyPress = this.keyPress.bind(this);\n      this.state = {\n        players : this.props.players\n      };\n    }\n\n    componentDidMount(){\n      document.addEventListener('updatePos',  (event) => {\n        this.setState({\n          players : event.detail.positions\n        });\n        // console.log(event.detail.positions);\n      });\n    }\n\n    keyPress(e){\n      var playersChanged = this.state.players;\n      for(var i=0;i<playersChanged.length;i++)\n      {\n        if(playersChanged[i].name == userPlayer.name)\n        {\n            if(e.keyCode == 39)\n              playersChanged[i].x =playersChanged[i].x+1;\n\n            if(e.keyCode == 37)\n            playersChanged[i].x =playersChanged[i].x-1;\n\n            if(e.keyCode == 38)\n            playersChanged[i].y =playersChanged[i].y-1;\n\n            if(e.keyCode == 40)\n            playersChanged[i].y =playersChanged[i].y+1;\n        }\n      }     \n      socket.emit(\"changePlayerPositions\",playersChanged);\n    }\n\n    render(){\n      var karz = this.state.players.map( (player) => <Character id={player.id} name={player.name} x={player.x} y={player.y} />);\n      return(\n        <div id=\"gameBox\" onKeyDown={this.keyPress} tabIndex=\"0\">\n          {karz}\n        </div>\n      );\n    }\n  } \n\n\n  socket.on(\"receivemessage\", (messages) => {\n    //console.log(\"peyechi ekta message\");\n    document.dispatchEvent(new CustomEvent(\"gandu\", {\n      detail: { barta : messages }\n    }));\n  });\n\n  /*\n\n  console.log(userPlayer.name);\n  socket.emit(\"addplayer\",userPlayer);\n\n  socket.on(\"changedPlayerPositions\", (newPositions) => {\n    console.log(newPositions);\n    document.dispatchEvent(new CustomEvent(\"updatePos\", {\n      detail: { positions : newPositions }\n    }));\n  });\n\n\n  return (\n  <div>\n    <GameBox players={[]}/>\n    <Chat name={userPlayer.name}/>\n  </div>\n  \n  );\n*/\n\n  class PlayerSelection extends React.Component {\n    constructor(props){\n      super(props);\n      this.state = {\n        name : \"your name\"\n      }\n      this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange(e) {\n      this.setState({\n        name : e.target.value\n      });\n    }\n\n    render()\n    {\n      return (\n      <div id=\"choosePlayer\">\n        <div>\n          <Character x={0} name={this.state.name}/>\n        </div>\n        <div>\n          <input type=\"text\" onChange={this.handleChange} placeholder=\"enter a message...\"></input>\n        </div>\n      </div>);\n    }\n  }\n  return <PlayerSelection />;\n}\n\nexport default App;\n\n\n"]},"metadata":{},"sourceType":"module"}