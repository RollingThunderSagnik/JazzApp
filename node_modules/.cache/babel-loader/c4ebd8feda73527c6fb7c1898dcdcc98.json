{"ast":null,"code":"import _assertThisInitialized from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/sagnikg/react/JazzApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/sagnikg/react/JazzApp/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport { ReactComponent } from \"@svgr/webpack?-svgo,+ref!./logo.svg\";\nimport './App.css';\nimport ReactDOM from 'react-dom';\nimport socketIOClient from \"socket.io-client\";\nvar ENDPOINT = \"http://127.0.0.1:4001\";\nvar socket = socketIOClient(ENDPOINT);\nsocket.on('connect', function () {\n  var userUnikID = \"user_\" + socket.id;\n  console.log(userUnikID); // true\n\n  console.log(\"outside\" + userUnikID);\n\n  function App() {\n    var tile = 64;\n\n    var Messages = /*#__PURE__*/function (_React$Component) {\n      _inherits(Messages, _React$Component);\n\n      function Messages(props) {\n        var _this;\n\n        _classCallCheck(this, Messages);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Messages).call(this, props));\n        _this.state = {\n          messages: _this.props.messages\n        };\n        return _this;\n      }\n\n      _createClass(Messages, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          document.addEventListener('gandu', function (event) {\n            _this2.setState({\n              messages: event.detail.barta\n            });\n          });\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this3 = this;\n\n          var msgz = this.state.messages.map(function (msg) {\n            return /*#__PURE__*/React.createElement(\"li\", {\n              __self: _this3,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 39,\n                columnNumber: 52\n              }\n            }, msg);\n          });\n          return /*#__PURE__*/React.createElement(\"ul\", {\n            id: \"messages\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 11\n            }\n          }, msgz);\n        }\n      }]);\n\n      return Messages;\n    }(React.Component);\n\n    socket.on(\"receivemessage\", function (messages) {\n      //console.log(\"peyechi ekta message\");\n      document.dispatchEvent(new CustomEvent(\"gandu\", {\n        detail: {\n          barta: messages\n        }\n      }));\n    });\n\n    var Chat = /*#__PURE__*/function (_React$Component2) {\n      _inherits(Chat, _React$Component2);\n\n      function Chat(props) {\n        var _this4;\n\n        _classCallCheck(this, Chat);\n\n        _this4 = _possibleConstructorReturn(this, _getPrototypeOf(Chat).call(this, props));\n        _this4.handleChange = _this4.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this4)));\n        _this4.keyPress = _this4.keyPress.bind(_assertThisInitialized(_assertThisInitialized(_this4)));\n        _this4.state = {\n          name: _this4.props.name,\n          messages: [],\n          currentmsg: ''\n        };\n        console.log(\"name is: \" + _this4.props.name);\n        return _this4;\n      }\n\n      _createClass(Chat, [{\n        key: \"keyPress\",\n        value: function keyPress(e) {\n          if (e.keyCode == 13) {\n            socket.emit('sendmessage', this.state.name, this.state.currentmsg);\n            e.target.value = '';\n          }\n        }\n      }, {\n        key: \"handleChange\",\n        value: function handleChange(e) {\n          this.state.currentmsg = e.target.value;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            id: \"chat\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 9\n            }\n          }, /*#__PURE__*/React.createElement(Messages, {\n            messages: this.state.messages,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"div\", {\n            id: \"typehold\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            onChange: this.handleChange,\n            onKeyDown: this.keyPress,\n            placeholder: \"enter a message...\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 13\n            }\n          })));\n        }\n      }]);\n\n      return Chat;\n    }(React.Component);\n\n    var Character = /*#__PURE__*/function (_React$Component3) {\n      _inherits(Character, _React$Component3);\n\n      function Character(props) {\n        var _this5;\n\n        _classCallCheck(this, Character);\n\n        _this5 = _possibleConstructorReturn(this, _getPrototypeOf(Character).call(this, props));\n        _this5.state = {\n          name: _this5.props.name,\n          x: _this5.props.x,\n          y: _this5.props.y,\n          id: _this5.props.id\n        };\n        _this5.state.charStyle = {\n          left: _this5.props.x * tile + 'px',\n          top: _this5.props.y * tile + 'px'\n        };\n        return _this5;\n      }\n\n      _createClass(Character, [{\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (this.props.x !== prevProps.x || this.props.y !== prevProps.y) {\n            this.setState({\n              x: this.props.x,\n              y: this.props.y,\n              charStyle: {\n                left: this.props.x * tile + 'px',\n                top: this.props.y * tile + 'px'\n              }\n            });\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          if (this.state.id == \"userChar\") return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"character\",\n            style: this.state.charStyle,\n            id: \"user\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"p\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 13\n            }\n          }, this.state.name.toUpperCase()));\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"character\",\n            style: this.state.charStyle,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"p\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 13\n            }\n          }, this.state.name.toUpperCase()));\n        }\n      }]);\n\n      return Character;\n    }(React.Component);\n\n    var playersIN = [{\n      name: 'acp',\n      x: 2,\n      y: 0,\n      id: 'main'\n    }, {\n      name: 'daya',\n      x: 1,\n      y: 0,\n      id: 'not_main'\n    }, {\n      name: '5',\n      x: 5,\n      y: 4,\n      id: 'not_main'\n    }]; // function newPlayer(name, x, y, id)\n    // {\n    // }\n\n    var GameBox = /*#__PURE__*/function (_React$Component4) {\n      _inherits(GameBox, _React$Component4);\n\n      function GameBox(props) {\n        var _this6;\n\n        _classCallCheck(this, GameBox);\n\n        _this6 = _possibleConstructorReturn(this, _getPrototypeOf(GameBox).call(this, props));\n        _this6.keyPress = _this6.keyPress.bind(_assertThisInitialized(_assertThisInitialized(_this6)));\n        _this6.state = {\n          players: _this6.props.players\n        };\n        return _this6;\n      }\n\n      _createClass(GameBox, [{\n        key: \"keyPress\",\n        value: function keyPress(e) {\n          var playersChanged = this.state.players;\n\n          for (var i = 0; i < playersChanged.length; i++) {\n            if (playersChanged[i].id == 'main') {\n              if (e.keyCode == 39) playersChanged[i].x = playersChanged[i].x + 1;\n              if (e.keyCode == 37) playersChanged[i].x = playersChanged[i].x - 1;\n              if (e.keyCode == 38) playersChanged[i].y = playersChanged[i].y - 1;\n              if (e.keyCode == 40) playersChanged[i].y = playersChanged[i].y + 1;\n            }\n          }\n\n          this.setState({\n            players: playersChanged\n          });\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this7 = this;\n\n          var karz = this.state.players.map(function (player) {\n            return /*#__PURE__*/React.createElement(Character, {\n              id: player.id,\n              name: player.name,\n              x: player.x,\n              y: player.y,\n              __self: _this7,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 54\n              }\n            });\n          });\n          return /*#__PURE__*/React.createElement(\"div\", {\n            id: \"gameBox\",\n            onKeyDown: this.keyPress,\n            tabIndex: \"0\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 9\n            }\n          }, karz);\n        }\n      }]);\n\n      return GameBox;\n    }(React.Component); //{prompt(\"Please enter your name\", \"Harry Potter\")}\n\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(GameBox, {\n      players: playersIN,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Chat, {\n      name: userUnikID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 5\n      }\n    }));\n  }\n});\nexport default App;","map":{"version":3,"sources":["/home/sagnikg/react/JazzApp/src/App.js"],"names":["React","ReactDOM","socketIOClient","ENDPOINT","socket","on","userUnikID","id","console","log","App","tile","Messages","props","state","messages","document","addEventListener","event","setState","detail","barta","msgz","map","msg","Component","dispatchEvent","CustomEvent","Chat","handleChange","bind","keyPress","name","currentmsg","e","keyCode","emit","target","value","Character","x","y","charStyle","left","top","prevProps","toUpperCase","playersIN","GameBox","players","playersChanged","i","length","karz","player"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo, { ReactComponent } from './logo.svg';\nimport './App.css';\nimport ReactDOM from 'react-dom';\n\nimport socketIOClient from \"socket.io-client\";\nconst ENDPOINT = \"http://127.0.0.1:4001\";\nconst socket = socketIOClient(ENDPOINT);\n\nsocket.on('connect', () => {\n  \nconst userUnikID = \"user_\" + socket.id;\n  console.log(userUnikID); // true\n\nconsole.log(\"outside\" + userUnikID);\n\n\n\nfunction App() {\n  var tile = 64; \n\n  class Messages extends React.Component{\n    constructor(props){\n      super(props);\n      this.state = {\n        messages : this.props.messages\n      }\n    }\n\n    componentDidMount(){\n      document.addEventListener('gandu',  (event) => {\n        this.setState({\n          messages : event.detail.barta\n        });\n      });\n    }\n\n    render(){\n      var msgz = this.state.messages.map( (msg) => <li>{msg}</li>);\n      return (\n          <ul id=\"messages\">\n            {msgz}\n          </ul>\n      );\n    }\n  }\n\n  socket.on(\"receivemessage\", (messages) => {\n    //console.log(\"peyechi ekta message\");\n    document.dispatchEvent(new CustomEvent(\"gandu\", {\n      detail: { barta : messages }\n    }));\n  });\n\n  class Chat extends React.Component {\n    constructor(props){\n      super(props);\n      this.handleChange = this.handleChange.bind(this);\n      this.keyPress = this.keyPress.bind(this);\n      this.state = {\n        name : this.props.name,\n        messages : [],\n        currentmsg : ''\n      }\n      console.log(\"name is: \"+this.props.name);\n    }\n\n    keyPress(e){\n      if(e.keyCode == 13)\n       {\n        socket.emit('sendmessage',this.state.name,this.state.currentmsg);\n        e.target.value = '';\n       }\n    }\n\n    handleChange(e) {\n      this.state.currentmsg = e.target.value;\n    }\n\n    render(){\n      return (\n        <div id=\"chat\">\n            <Messages messages={this.state.messages}/>\n          <div id=\"typehold\">\n            <input type=\"text\" onChange={this.handleChange} onKeyDown={this.keyPress} placeholder=\"enter a message...\"></input>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  class Character extends React.Component {\n    constructor(props){\n      super(props);\n      this.state = {\n        name: this.props.name,\n        x : this.props.x,\n        y : this.props.y,\n        id : this.props.id\n        \n      };\n      this.state.charStyle = {\n          left: this.props.x*tile + 'px',\n          top: this.props.y*tile + 'px'\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n      if (this.props.x !== prevProps.x || this.props.y !== prevProps.y) {\n        this.setState({ \n          x : this.props.x,\n          y : this.props.y,\n          charStyle : {\n            left: this.props.x*tile + 'px',\n            top: this.props.y*tile + 'px'\n          }\n        });\n      }\n    }\n    \n    render(){\n      \n      if(this.state.id == \"userChar\")\n        return(\n          <div className=\"character\" style={this.state.charStyle} id=\"user\">\n            <p>{this.state.name.toUpperCase()}</p>\n          </div>\n        );\n      return(\n          <div className=\"character\" style={this.state.charStyle} >\n            <p>{this.state.name.toUpperCase()}</p>\n          </div>\n      );\n    }\n  }\n  \n  var playersIN = [{\n    name : 'acp',\n    x : 2,\n    y : 0,\n    id : 'main'\n  },\n  {\n    name : 'daya',\n    x : 1,\n    y : 0,\n    id : 'not_main'\n  },  \n  {\n    name : '5',\n    x : 5,\n    y : 4,\n    id : 'not_main'\n  }];\n\n  // function newPlayer(name, x, y, id)\n  // {\n\n  // }\n\n  class GameBox extends React.Component {\n    constructor(props){\n      super(props);\n      this.keyPress = this.keyPress.bind(this);\n      this.state = {\n        players : this.props.players\n      };\n    }\n\n    keyPress(e){\n      var playersChanged = this.state.players;\n      for(var i=0;i<playersChanged.length;i++)\n      {\n        if(playersChanged[i].id == 'main')\n        {\n            if(e.keyCode == 39)\n            playersChanged[i].x =playersChanged[i].x+1;\n\n            if(e.keyCode == 37)\n            playersChanged[i].x =playersChanged[i].x-1;\n\n            if(e.keyCode == 38)\n            playersChanged[i].y =playersChanged[i].y-1;\n\n            if(e.keyCode == 40)\n            playersChanged[i].y =playersChanged[i].y+1;\n        }\n      }      \n      this.setState({\n        players : playersChanged\n      });\n    }\n\n    render(){\n      var karz = this.state.players.map( (player) => <Character id={player.id} name={player.name} x={player.x} y={player.y} />);\n      return(\n        <div id=\"gameBox\" onKeyDown={this.keyPress} tabIndex=\"0\">\n          {karz}\n        </div>\n      );\n    }\n  }\n//{prompt(\"Please enter your name\", \"Harry Potter\")}\n  return (\n  <div>\n    <GameBox players={playersIN}/>\n    <Chat name={userUnikID}/>\n  </div>\n  \n  );\n}\n\n});\nexport default App;\n\n\n"]},"metadata":{},"sourceType":"module"}